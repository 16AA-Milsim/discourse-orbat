{{! template-lint-disable require-strict-mode}}
<div class="orbat-page">
  <div class="orbat-page__toolbar">
    <a
      href={{this.backHref}}
      class="orbat-page__back"
      {{on "click" this.goBack}}
    >
      {{d-icon "chevron-left"}}
      <span>{{i18n "orbat.page.back"}}</span>
    </a>
  </div>

  <div class="orbat-page__masthead">
    <img
      class="orbat-page__masthead-logo"
      src={{this.mastheadLogo}}
      alt="16 Air Assault Brigade insignia"
      width="50"
      height="60"
    />
    <div class="orbat-page__masthead-text">
      {{#if this.tree.title}}
        <h1 class="orbat-page__title">
          {{this.tree.title}}
        </h1>
      {{/if}}
      {{#if this.tree.subtitle}}
        <p class="orbat-page__subtitle">
          {{this.tree.subtitle}}
        </p>
      {{/if}}
    </div>
  </div>

  {{#if this.hasErrors}}
    <section class="orbat-alert">
      <h2 class="orbat-alert__title">
        {{i18n "orbat.page.errors_title"}}
      </h2>
      <ul class="orbat-alert__list">
        {{#each this.errors as |error|}}
          <li>{{error}}</li>
        {{/each}}
      </ul>
    </section>
  {{/if}}

  {{#if this.hasPrimaryNode}}
    <section class={{if this.hasSecondaryNodes "orbat-root orbat-root--has-secondary" "orbat-root"}}>
      <div class="orbat-primary">
        <div class="orbat-primary__heading">
          <img
            class="orbat-primary__icon"
            src={{this.hqIcon}}
            alt="HQ emblem"
            width="16"
            height="16"
          />
          <h2 class="orbat-primary__title">
            {{this.primaryNode.label}}
          </h2>
        </div>
        <div class="orbat-primary__node">
          <OrbatNode
            @node={{this.primaryNode}}
            @display={{this.display}}
            @showLabel={{false}}
            @centered={{true}}
          />
        </div>
      </div>

      {{#if this.hasSecondaryNodes}}
        <span class="orbat-root__connector" aria-hidden="true"></span>
        <div class="orbat-secondary" style={{this.rootStyle}}>
          {{#each this.secondaryNodes as |node|}}
            <section class="orbat-secondary__item">
              <div class="orbat-secondary__heading">
                <img
                  class="orbat-secondary__icon"
                  src={{this.platoonIcon}}
                  alt="Platoon HQ emblem"
                  width="14"
                  height="14"
                />
                <h3 class="orbat-section__title">
                  {{node.label}}
                </h3>
              </div>
              <OrbatNode @node={{node}} @display={{this.display}} @showLabel={{false}} />
            </section>
          {{/each}}
        </div>
      {{/if}}
    </section>
  {{/if}}

  {{#unless this.hasPrimaryNode}}
    <div class="orbat-empty">
      {{i18n "orbat.page.no_data"}}
    </div>
  {{/unless}}
</div>
